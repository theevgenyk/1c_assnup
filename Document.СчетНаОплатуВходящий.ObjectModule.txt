

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	//{{__КОНСТРУКТОР_ВВОД_НА_ОСНОВАНИИ
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	Если ТипЗнч(ДанныеЗаполнения) = Тип("ДокументСсылка.ВыпускТоваров") Тогда
		// Заполнение шапки
		БанковскийСчет = ДанныеЗаполнения.БанковскийСчет;
		Договор = ДанныеЗаполнения.Договор;
		Итого = ДанныеЗаполнения.Итого;
		Комментарии = ДанныеЗаполнения.Комментарии;
		Контрагент = ДанныеЗаполнения.Контрагент;
		Организация = ДанныеЗаполнения.Организация;
		Для Каждого ТекСтрокаМатериалы Из ДанныеЗаполнения.Материалы Цикл
			НоваяСтрока = Материалы.Добавить();
			НоваяСтрока.ЕдиницаИзмерения = ТекСтрокаМатериалы.ЕдиницаИзмерения;
			НоваяСтрока.Количество = ТекСтрокаМатериалы.Количество;
			НоваяСтрока.НДС = ТекСтрокаМатериалы.НДС;
			НоваяСтрока.Номенклатура = ТекСтрокаМатериалы.Номенклатура;
			НоваяСтрока.Сумма = ТекСтрокаМатериалы.Сумма;
			НоваяСтрока.Цена = ТекСтрокаМатериалы.Цена;
		КонецЦикла;
	ИначеЕсли ТипЗнч(ДанныеЗаполнения) = Тип("ДокументСсылка.РасходнаяТоварнаяНакладная") Тогда
		// Заполнение шапки
		БанковскийСчет = ДанныеЗаполнения.БанковскийСчет;
		Договор = ДанныеЗаполнения.Договор;
		Итого = ДанныеЗаполнения.Итого;
		Комментарии = ДанныеЗаполнения.Комментарии;
		Контрагент = ДанныеЗаполнения.Контрагент;
		Организация = ДанныеЗаполнения.Организация;
		Для Каждого ТекСтрокаМатериалы Из ДанныеЗаполнения.Материалы Цикл
			НоваяСтрока = Материалы.Добавить();
			НоваяСтрока.ЕдиницаИзмерения = ТекСтрокаМатериалы.ЕдиницаИзмерения;
			НоваяСтрока.Количество = ТекСтрокаМатериалы.Количество;
			НоваяСтрока.НДС = ТекСтрокаМатериалы.НДС;
			НоваяСтрока.Номенклатура = ТекСтрокаМатериалы.Номенклатура;
			НоваяСтрока.Сумма = ТекСтрокаМатериалы.Сумма;
			НоваяСтрока.Цена = ТекСтрокаМатериалы.Цена;
		КонецЦикла;
	КонецЕсли;
	//}}__КОНСТРУКТОР_ВВОД_НА_ОСНОВАНИИ
КонецПроцедуры


Процедура ОбработкаПроведения(Отказ, Режим)
	//{{__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!

	// регистр РегистрБухгалтерии1 
	Движения.РегистрБухгалтерии1.Записывать = Истина;
	Для Каждого ТекСтрокаМатериалы Из Материалы Цикл
		Движение = Движения.РегистрБухгалтерии1.Добавить();
		Движение.Период = Дата;
		Движение.СчетДт = ТекСтрокаМатериалы.Дт;
		Движение.СчетКт = ТекСтрокаМатериалы.Кт;
		Движение.Организация = Организация;
		Движение.Сумма = ТекСтрокаМатериалы.Сумма;
	КонецЦикла;

	//}}__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
КонецПроцедуры

